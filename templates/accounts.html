<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Table</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>

    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        .menu {
            display: none;
            position: absolute;
            background-color: white;
            border: 1px solid #ddd;
            z-index: 1;
            padding: 5px;
        }
        .menu div {
            cursor: pointer;
            padding: 8px 12px;
        }
        .menu div:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>

<h2>Settings</h2>

<table id="userTable">
    <thead>
        <tr>
            <th>Username</th>
            <th>Position</th>
            <th>Account Type</th>
            <th>Settings</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>NHERO</td>
            <td>Manager</td>
            <td>Admin</td>
            <td><button onclick="toggleMenu(event)"><i class="fas fa-cog"></i></button></td>
        </tr>
        <tr>
            <td>NHERA</td>
            <td>Developer</td>
            <td>User</td>
            <td><button onclick="toggleMenu(event)"><i class="fas fa-cog"></i></button></td>
        </tr>
        <tr>
            <td>NHERI</td>
            <td>Designer</td>
            <td>User</td>
            <td><button onclick="toggleMenu(event)"><i class="fas fa-cog"></i></button></td>
        </tr>
    </tbody>
</table>

<div id="menuTemplate" class="menu">
    <div onclick="addUser()">Add</div>
    <div onclick="editUser(event)">Edit</div>
    <div onclick="deleteUser(event)">Delete</div>
</div>

<script>
    function addUser() {
        const username = prompt("Enter Username:");
        const position = prompt("Enter Position:");
        const accountType = prompt("Enter Account Type:");

        if (username && position && accountType) {
            const table = document.getElementById("userTable").getElementsByTagName("tbody")[0];
            const newRow = table.insertRow();
            newRow.insertCell(0).innerText = username;
            newRow.insertCell(1).innerText = position;
            newRow.insertCell(2).innerText = accountType;

            const actionsCell = newRow.insertCell(3);
            actionsCell.innerHTML = `<button onclick="toggleMenu(event)"><i class="fas fa-cog"></i></button>`;
        } else {
            alert("Please fill out all fields.");
        }
    }

    function toggleMenu(event) {
        // Remove any existing menus
        const existingMenus = document.querySelectorAll('.menu');
        existingMenus.forEach(m => m.remove());

        const menu = document.getElementById("menuTemplate").cloneNode(true);
        menu.style.display = 'block';
        const rect = event.target.getBoundingClientRect();
        menu.style.top = `${rect.bottom + window.scrollY}px`;
        menu.style.left = `${rect.left}px`;

        document.body.appendChild(menu);

        // Hide the menu when clicking outside of it
        document.addEventListener('click', (e) => {
            if (!menu.contains(e.target) && !event.target.contains(e.target)) {
                menu.remove();
            }
        }, { once: true });
    }

    function editUser(event) {
        const row = event.target.closest('tr');
        const username = row.cells[0].innerText;
        const position = row.cells[1].innerText;
        const accountType = row.cells[2].innerText;

        const newUsername = prompt("Edit Username:", username);
        const newPosition = prompt("Edit Position:", position);
        const newAccountType = prompt("Edit Account Type:", accountType);

        if (newUsername) row.cells[0].innerText = newUsername;
        if (newPosition) row.cells[1].innerText = newPosition;
        if (newAccountType) row.cells[2].innerText = newAccountType;
    }

    function deleteUser(event) {
        if (confirm("Are you sure you want to delete this user?")) {
            const row = event.target.closest('tr');
            row.remove();
        }
    }
</script>

</body>
</html>
